---
title: "Attribution execution speed sample results"
author: "[Anand Krishnakumar](https://github.com/anandkkumar)"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
bibliography: introduction.bib
vignette: >
  %\VignetteIndexEntry{Attribution execution speed results}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)

library(PortfolioAttribution)
```

This vignette gives and indication of the how long the computations take on a large data set of portfolio & benchmark weights and returns. It is intended to be illustrative and does not construe a rigorous benchmarking of the functions. The `system.time` command is employed.

### <ins>Define the data inputs</ins>

```{r, echo=FALSE}
data("sample_data", package = "PortfolioAttribution")
```

Say we have a relatively large portfolio & benchmark data set at the security level. This example data set in the package has `r NCOL(multi_period_portf_1$Rp)` assets over `r NROW(multi_period_portf_1$Rp)` monthly periods. The column names are security identifiers and the row indexes are month-end dates.

The first few periods & assets are shown below.

```{r}
library(PortfolioAttribution)
data("sample_data", package = "PortfolioAttribution")
# Portfolio weights
multi_period_portf_1$wp[1:3,1:4]

# Portfolio returns
multi_period_portf_1$Rp[1:3,1:4]

# Benchmark weights
multi_period_portf_1$wb[1:3,1:4]

# Benchmark returns
multi_period_portf_1$Rb[1:3,1:4]
```

### <ins>Timing results</ins>

The following command is executed to run & time a multi-period arithmetic attribution analysis using the default _Brinson and Fachler [-@brinson1985measuring]_ model and adopting a top-down approach with the default smoothing algorithm of _GRAP [-@grap1997]_.

```{r}
system.time(Attribution(multi_period_portf_1$Rp, multi_period_portf_1$wp, 
                        multi_period_portf_1$Rb, multi_period_portf_1$wb, 
                        method = "top.down"))
```


The following command is executed to run & time a multi-period geometric attribution analysis.

```{r}
system.time(Attribution(multi_period_portf_1$Rp, multi_period_portf_1$wp, 
                        multi_period_portf_1$Rb, multi_period_portf_1$wb, 
                        geometric = TRUE))
```

### <ins>References</ins>
