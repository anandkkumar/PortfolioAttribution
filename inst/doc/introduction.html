<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Anand Krishnakumar" />

<meta name="date" content="2018-04-26" />

<title>Introduction to Portfolio Attribution</title>






<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">Introduction to Portfolio Attribution</h1>
<h4 class="author"><em><a href="https://github.com/anandkkumar">Anand Krishnakumar</a></em></h4>
<h4 class="date"><em>2018-04-26</em></h4>



<div id="preliminaries" class="section level3">
<h3><ins>Preliminaries</ins></h3>
<p>The <code>PortfolioAttribution</code> package is a implementation of performance return attribution and is largely based on the methodologies documented in the book <em>Practical Portfolio Performance Measurement and Attribution by Bacon <span class="citation">(2008)</span></em>.</p>
<p>Performance attribution allows us to decompose the value added by the portfolio into different components and, thus, to evaluate the quality of investment decisions. This is achieved by the decomposition of the excess returns, relative to a benchmark.</p>
<p>The foundations of performance attribution were established in two articles published by <em>Brinson et al. <span class="citation">(1986)</span></em> and <em>Brinson and Fachler <span class="citation">(1985)</span></em> now collectively know as the Brinson model. The excess return of a portfolio over a benchmark can be defined as arithmetic excess return or geometric excess return.</p>
</div>
<div id="arithmetic-attribution" class="section level3">
<h3><ins>Arithmetic attribution</ins></h3>
<p>Arithmetic excess return is the profit in excess of a notional or benchmark fund expressed as a percentage of the initial amount invested.</p>
<p><span class="math display">\[
E^A = R_p - R_b
\]</span></p>
<p>Arithmetic attribution looks to decompose the arithmetic excess return into three attribution effects, <em>allocation</em>, <em>interaction</em> and <em>selection</em> effects based on the Brinson model. The allocation effect captures the value added by category bets taken by the portfolio manager, while the selection effect captures the value added by selecting individual securities within the asset category. The remaining interaction effect is a plug term that is required in order for the total of the effects to sum up to the total arithmetic excess return.</p>
<p>Let’s assume we divide the portfolio &amp; benchmark into <span class="math inline">\(n\)</span> categories (e.g. by Sector). There are two ways to compute the arithmetic attribution effects as outlined below.</p>
<div id="brinson-hood-and-beebower" class="section level4">
<h4>Brinson, Hood and Beebower</h4>
<p>This method is based on the <em>Brinson et al. <span class="citation">(1986)</span></em> article and defines allocation, interaction and selection effects for each category <span class="math inline">\(i\)</span> as</p>
<p><span class="math display">\[
  \begin{aligned}
    A_i &amp; = (w_{pi}-w_{bi})\times R_{bi} \\
    S_i &amp; = w_{bi}\times(R_{pi}-R_{bi}) \\
    I_i &amp; = (w_{pi}-w_{bi})\times(R_{pi}-R_{bi})
  \end{aligned}
\]</span></p>
<p>The relationship between these attribution effects and the total arithmetic excess return for the portfolio over the benchmark is given by</p>
<p><span class="math display">\[
E^A = R_p - R_b = \sum ^n_{i=1} A_i + \sum ^n_{i=1} S_i + \sum ^n_{i=1} I_i
\]</span></p>
</div>
<div id="brinson-and-fachler" class="section level4">
<h4>Brinson and Fachler</h4>
<p>This method is based on the <em>Brinson and Fachler <span class="citation">(1985)</span></em> article and defines interaction and selection effects the same as in the Brinson, Hood and Beebower approach but the allocation effect is defined as</p>
<p><span class="math display">\[
  A_i = (w_{pi} - w_{bi})\times (R_{bi} - R_b)
\]</span></p>
<p>As before, the relationship between these attribution effects and the total arithmetic excess return for the portfolio over the benchmark is given by Geometric Excess Return is the profit in excess of a notional or benchmark fund expressed as a percentage of the final value of the notional or benchmark fund.</p>
<p><span class="math display">\[
E^A = R_p - R_b = \sum ^n_{i=1} A_i + \sum ^n_{i=1} S_i + \sum ^n_{i=1} I_i
\]</span></p>
</div>
</div>
<div id="geometric-attribution" class="section level3">
<h3><ins>Geometric attribution</ins></h3>
<p><span class="math display">\[
E^G = \frac{(1 + R_p)}{(1 + R_b)} - 1
\]</span></p>
<p>Geometric attribution extends the Brinson Fachler model to decompose the geometric excess return into two attribution effects, allocation, and selection effects. The semantic meaning of the allocation &amp; selection effects are the same as described earlier with arithmetic attribution. There is no interaction effect in this approach.</p>
<p>Let’s assume we divide the portfolio &amp; benchmark into <span class="math inline">\(n\)</span> categories (e.g. by Sector). The allocation, and selection effects for each category <span class="math inline">\(i\)</span> are defined as</p>
<p><span class="math display">\[
  \begin{aligned}
    A_i^G &amp; = (w_{pi} - w_{bi}) \times \frac{(1 + R_{bi})}{(1 + R_b)} - 1 \\
    S_i^G &amp; = w_{pi} \times \left(\frac{(1 + R_{pi})}{(1 + R_{bi})} - 1\right) \times \frac{(1 + R_{bi})}{(1 + R_{bs})}
  \end{aligned}
\]</span></p>
<p>where <span class="math inline">\(R_{bs}\)</span>, referred to as the allocation notional return, is given by</p>
<p><span class="math display">\[
R_{bs} = \sum^n_{i=1}\left(w_{pi} \times R_{bi} \right)
\]</span></p>
<p>The relationship between the attribution effects and the total geometric excess return for the entire portfolio over the benchmark is given by <span class="math display">\[
E^G = \frac{(1 + R_p)}{(1+ R_b)} - 1 = \left((1 + \sum ^{n}_{i=1} A_i^G) \times (1 + \sum ^{n}_{i=1} S_i^G)\right) - 1
\]</span></p>
</div>
<div id="multi-currency-portfolios" class="section level3">
<h3><ins>Multi-currency portfolios</ins></h3>
<p>The <code>PortfolioAttribution</code> package reports currency effects for arithmetic and geometric attribution analysis. Some practitioners &amp; attribution platforms simply consider the <em>currency effect</em> to be the difference in effects between running the attribution analysis with returns in the local currency and again with returns in the base currency. To replicate this the standard attribution analysis is simply run twice using the methods defined in the package and their difference computed.</p>
<p>However, the package also implements two other approaches that are a little more involved, the approach outlined by <em>Ankrim and Hensel <span class="citation">(1994)</span></em> for arithmetic attribution and the approach outlined by <em>Bacon <span class="citation">(2008)</span></em>. For the details on these approaches please refer to the <a href="introduction-multi-currency.html">multi-currency introduction vignette</a>.</p>
</div>
<div id="multi-period-analysis" class="section level3">
<h3><ins>Multi-period analysis</ins></h3>
<div id="arithmetic-attribution-1" class="section level4">
<h4>Arithmetic attribution</h4>
<p>The <code>PortfolioAttribution</code> package implements five different approaches to smooth the periodic attribution effects so that they can explain the total arithmetic excess return over all periods. Please refer to the <a href="multi-period-arithmetic.html">multi-period arithmetic attribution vignette</a> for examples and a summary of the characteristics &amp; differences between the methods. The default method chosen by the package is <em>GRAP <span class="citation">(1997)</span></em>.</p>
</div>
<div id="geometric-attribution-1" class="section level4">
<h4>Geometric attribution</h4>
<p>Unlike in the case of arithmetic attribution, with geometric attribution analysis, there is no need to smooth periodic attribution effects so that they can explain the total geometric excess return over all periods. This is because the effects compound naturally by definition. This is a significant advantage, in terms of clarity, to adopting the geometric attribution analysis.</p>
</div>
</div>
<div id="package-basics" class="section level3">
<h3><ins>Package basics</ins></h3>
<p>The <code>PortfolioAttribution</code> package supports multiple methodologies and allows for multi-period attribution analysis. It also support multi-currency portfolios in which case it reports the currency effects. The package also supports the ability to define custom hierarchies to perform multi-level attribution. The various other companion vignettes in this package contain illustrative examples. They use sample data sets that are included with the package so that the users can try these examples on their own.</p>
<p>The attribution functions in this package employ an interface in terms of weights &amp; returns. In other words, it is expected that any positions, prices, transactions and other complexities that go into computing the desired weight and return to use in attribution analysis, has occurred in advance and the resulting data is feed in as input to these functions.</p>
<p>The main functions of interest are <code>Attribution</code>, <code>Attribution.levels</code> and <code>AttributionFixedIncome</code>. You can use the <code>help</code> command or the <code>?</code> shortcut on any of these functions to peruse their documentation.</p>
<p>Some common aspects to the different functions are:</p>
<ul>
<li>the returns and weights have to be specified as decimal numbers and not percentages</li>
<li>the returns have to be in the form of a <span class="math inline">\(T \times n\)</span> <code>xts</code>, <code>data.frame</code> or <code>matrix</code> of returns</li>
<li>the weights have to be in the form of a vector or <span class="math inline">\(T \times n\)</span> <code>xts</code>, <code>data.frame</code> or <code>matrix</code> of returns. When the weights are in the form a vector it is assumed that the weights are reset to the target prior to each period</li>
<li>the rows in the returns &amp; weights data represent periods while the columns represent assets or categories</li>
<li>the package requires that the return data have row indexes defined as dates or periods compatible with the <code>xts</code> package</li>
<li>the portfolio &amp; benchmark returns &amp; weights must have the same number of assets or categories for each date. If a portfolio or benchmark does not hold an asset or category that is in the other, a return and weight of 0 must be specified. In other words the dimensions of the portfolio &amp; benchmark data must match.</li>
<li>similarly, in a multi-period data set, if an asset or category drops out of the portfolio or benchmark, a return and weight of 0 must be specified. In other words the number of assets or categories for each period must be the same.</li>
<li>the package treats the weights provided as <strong>end-of-period</strong> weights. They can be thought of as taking effect immediately after the close of the bar. So, a weight specified for March 31 will actually be in effect starting April 1 through the next period. This convention was chosen because it fits with common usage, and because it simplifies date sub-setting via endpoints.</li>
<li>the package by default applies the Brinson and Fachler methodology for both arithmetic and geometric attribution analysis. For arithmetic attribution only, the package supports switching it to use the Brinson, Hood and Beebower method.</li>
<li>for arithmetic attribution the package supports combining the interaction effects into the selection or allocation effects, which is termed a <em>top-down</em> and <em>bottom-up</em> approach respectively. The default behavior is not combine them and report the interaction effects separately (please refer to the <a href="top-down-bottom-up.html">top-down v/s bottom-up arithmetic attribution vignette</a> for more details). For geometric attribution, no interaction effects are reported.</li>
<li>the smoothing algorithms implemented by the package are listed below (please refer to the <a href="multi-period-arithmetic.html">multi-period arithmetic attribution vignette</a> for more details on smoothing)
<ul>
<li>GRAP (<strong>default</strong>)</li>
<li>Carino</li>
<li>Menchero</li>
<li>Frongello</li>
<li>Davies and Laker</li>
</ul></li>
<li>in addition to the attribution effects, the attribution methods also report the total excess returns for each period and annualizes it when appropriate</li>
<li>in the case of multi-currency arithmetic attribution, the weights &amp; returns of forward contracts in the portfolio &amp; benchmarks can also be provided</li>
<li>the type of object returned by all of the attribution computational methods is a <code>list</code>. The list members that represent the attribution effects are <code>xts</code> or <code>data.frame</code> objects, while the excess returns are <code>matrix</code> objects.</li>
<li>there are a number of unit tests included as part of the package that can be executed &amp; examined to better understand the different functions and their expected behavior. These unit tests are available in the <code>tests</code> folder and employ the <code>testthat</code> framework. These use specific test data sets that included in the package and so can be run through through <code>RStudio</code> or the R console directly.</li>
</ul>
</div>
<div id="references" class="section level3 unnumbered">
<h3><ins>References</ins></h3>
<div id="refs" class="references">
<div id="ref-ankrim1994multicurrency">
<p>Ankrim, Ernest M, and Chris R Hensel. 1994. “Multicurrency Performance Attribution.” <em>Financial Analysts Journal</em>. JSTOR, 29–35.</p>
</div>
<div id="ref-bacon2008practical">
<p>Bacon, Carl R. 2008. <em>Practical Portfolio Performance Measurement and Attribution, Second Edition</em>. Wiley.</p>
</div>
<div id="ref-brinson1985measuring">
<p>Brinson, Gary P, and Nimrod Fachler. 1985. “Measuring Non-Us. Equity Portfolio Performance.” <em>The Journal of Portfolio Management</em> 11 (3). Institutional Investor Journals: 73–76.</p>
</div>
<div id="ref-brinson1986determinants">
<p>Brinson, Gary P, L Randolph Hood, and Gilbert L Beebower. 1986. “Determinants of Portfolio Performance.” <em>Financial Analysts Journal</em>. JSTOR, 39–44.</p>
</div>
<div id="ref-grap1997">
<p>GRAP, (Groupe de Recherche en Attribution de Performance). 1997. “Synthese Des Modeles d’attribution de Performance.” <em>Journal of Performance Measurement</em>. Paris, Mars.</p>
</div>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
